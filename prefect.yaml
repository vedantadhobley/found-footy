name: found-footy
prefect-version: 3.0.0

build: null
push: null
pull: null

deployments:
  # 1. Daily Ingest
  - name: fixtures-ingest-daily
    entrypoint: found_footy.flows.fixtures_flows:fixtures_ingest_flow
    work_pool:
      name: fixtures-pool
    schedule:
      cron: "5 0 * * *"
      timezone: UTC
      active: false
    parameters:
      date_str: null
      team_ids: "{{ all_teams_2025_ids }}"
    tags:
      - fixtures
      - daily
      - all-teams
    description: "Daily fixtures ingest - all tracked teams (UEFA clubs + FIFA nationals)"

  # 2. Manual ingest
  - name: fixtures-ingest-manual
    entrypoint: found_footy.flows.fixtures_flows:fixtures_ingest_flow
    work_pool:
      name: fixtures-pool
    parameters:
      date_str: "20250903"
      team_ids: "{{ all_teams_2025_ids }}"
    tags:
      - fixtures
      - manual
    description: "Manual fixtures ingest for Sep 03, 2025"

  # 3. Advance Flow
  - name: fixtures-advance-flow
    entrypoint: found_footy.flows.fixtures_flows:fixtures_advance_flow
    work_pool:
      name: fixtures-pool
    parameters:
      source_collection: "fixtures_staging"
      destination_collection: "fixtures_active"
      fixture_id: 0
    tags:
      - fixtures
      - advance
    description: "Universal fixture advancement"

  # NEW: Goal processing flow
  - name: fixtures-goal-flow
    entrypoint: found_footy.flows.fixtures_flows:fixtures_goal_flow
    work_pool:
      name: fixtures-pool
    parameters:
      fixture_id: 0
      goal_events: []
    tags:
      - goals
      - processing
    description: "Dedicated goal event processing flow"

  # Monitor - simple, no custom naming
  - name: fixtures-monitor-flow
    entrypoint: found_footy.flows.fixtures_flows:fixtures_monitor_flow
    work_pool:
      name: fixtures-monitor-pool
    schedule:
      cron: "*/3 * * * *"
      timezone: UTC
      active: true
    parameters: {}
    tags:
      - fixtures
      - monitor
    description: "Always-running monitor - default naming"

  # Twitter - name set by automation
  - name: twitter-search-flow
    entrypoint: found_footy.flows.twitter_flows:twitter_search_flow
    work_pool:
      name: twitter-pool
    parameters:
      goal_id: null
    tags:
      - twitter
      - automation
    description: "Event-driven Twitter processing"