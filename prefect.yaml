name: found-footy
prefect-version: 3.0.0

# Build step - no custom build needed since we use pip install -e .
build: null

# Push step - no remote storage for local development  
push: null

# Pull step - code is already installed via pip install -e .
pull: null

# ‚úÖ SIMPLIFIED: Only 2 deployments
deployments:
  # 1. Daily auto-runner (disabled by default, configurable in UI)
  - name: fixtures-flow-daily
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    schedule:
      cron: "5 0 * * *"  # Daily at 00:05 UTC
      timezone: UTC
      active: false  # ‚úÖ DISABLED by default - enable in Prefect UI
    parameters:
      league_ids: "[39,2,48,1]"  # ‚úÖ UPDATED: Only active leagues
    tags:
      - fixtures
      - scheduled
      - daily
      - configurable
    description: |
      Daily fixtures monitor (DISABLED by default)
      
      ‚öôÔ∏è  Configure in Prefect UI:
      - Enable/disable schedule
      - Change league_ids parameter for different competitions
      
      üèÜ Current active leagues: [39,2,48,1] (Premier League, Champions League, FA Cup, World Cup)

  # 2. Instant manual runner
  - name: fixtures-flow-manual
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    parameters:
      league_ids: "[39,2,48,1]"  # ‚úÖ UPDATED: Only active leagues
    tags:
      - fixtures
      - manual
      - instant
      - configurable
    description: |
      Manual fixtures runner - run immediately for any date/leagues
      
      üìÖ Parameters:
      - date_str: "20250828" (YYYYMMDD format) or leave empty for today
      - league_ids: JSON array or comma-separated string
      
      üèÜ Current active leagues: [39,2,48,1]
      - 39: Premier League
      - 2: UEFA Champions League  
      - 48: FA Cup
      - 1: World Cup

  # 3. YouTube flow (triggered by automation)
  - name: youtube-flow
    entrypoint: found_footy.flows.youtube_flow:youtube_flow
    work_pool:
      name: youtube-pool
    # ‚úÖ NO SCHEDULE - triggered by automation only
    parameters: {}
    tags:
      - youtube
      - automated
      - highlights
    description: "YouTube highlights monitor (triggered automatically by fixture completion events)"