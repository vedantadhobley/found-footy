name: found-footy
prefect-version: 3.0.0

# Build step - no custom build needed since we use pip install -e .
build: null

# Push step - no remote storage for local development  
push: null

# Pull step - code is already installed via pip install -e .
pull: null

deployments:
  # 1. Daily auto-runner
  - name: fixtures-flow-daily
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    schedule:
      cron: "5 0 * * *"
      timezone: UTC
      active: false
    parameters:
      date_str: null  # ✅ CONSISTENT: Use null, code defaults to today
      team_ids: null  # ✅ CONSISTENT: Use null, code defaults to all teams
    tags:
      - fixtures
      - scheduled
      - daily
      - restructured
    description: "Daily fixtures ingest + monitor (DISABLED by default)"

  # 2. Manual runner - ✅ PRE-FILLED with current date
  - name: fixtures-flow-manual
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    parameters:
      date_str: "20250831"  # ✅ PRE-FILLED: Today's date (will update this in deployment script)
      team_ids: null  # ✅ CONSISTENT: Use null, defaults to all teams
    tags:
      - fixtures
      - manual
      - instant
      - restructured
    description: "Manual fixtures ingest + monitor (pre-filled with today's date)"

  # 3. Twitter flow - ✅ ALREADY CONSISTENT
  - name: twitter-flow
    entrypoint: found_footy.flows.twitter_flow:twitter_flow
    work_pool:
      name: twitter-pool
    parameters:
      goal_id: null
    tags:
      - twitter
      - restructured
    description: "Twitter flow (triggered by goal detection)"