name: found-footy
prefect-version: 3.0.0

# Build step - no custom build needed since we use pip install -e .
build: null

# Push step - no remote storage for local development  
push: null

# Pull step - code is already installed via pip install -e .
pull: null

deployments:
  # 1. Daily auto-runner with enhanced naming
  - name: fixtures-flow-daily
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    schedule:
      cron: "5 0 * * *"
      timezone: UTC
      active: false
    parameters:
      date_str: null
      team_ids: null
    tags:
      - fixtures
      - scheduled
      - daily
      - restructured
    description: "Daily fixtures ingest + monitor (DISABLED by default)"
    # âœ… TIMELINE: Enhanced flow run name for scheduled runs
    job_variables:
      name: "ðŸ“… Daily-Fixtures-{{ now().strftime('%Y-%m-%d') }}"

  # 2. Manual runner with enhanced naming
  - name: fixtures-flow-manual
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    parameters:
      date_str: "20250831"
      team_ids: null
    tags:
      - fixtures
      - manual
      - instant
      - restructured
    description: "Manual fixtures ingest + monitor (pre-filled with today's date)"
    # âœ… TIMELINE: Enhanced flow run name for manual runs
    job_variables:
      name: "ðŸ”§ Manual-Fixtures-{{ parameters.date_str or now().strftime('%Y%m%d') }}-{{ now().strftime('%H:%M') }}"

  # 3. Twitter flow - will use automation-generated names
  - name: twitter-flow
    entrypoint: found_footy.flows.twitter_flow:twitter_flow
    work_pool:
      name: twitter-pool
    parameters:
      goal_id: null
    tags:
      - twitter
      - restructured
    description: "Twitter flow (triggered by goal detection with timeline names)"