name: found-footy
prefect-version: 3.0.0

build: null
push: null
pull: null

deployments:
  # 1. Daily Ingest
  - name: ingest-daily
    entrypoint: found_footy.flows.ingest_flow:ingest_flow
    work_pool:
      name: ingest-pool
    schedule:
      cron: "5 0 * * *"
      timezone: UTC
      active: false
    parameters:
      date_str: null
      team_ids: "{{ all_teams_2025_ids }}"
    tags:
      - ingest
      - daily
      - all-teams
    description: "Daily fixtures ingest - all tracked teams"

  # 2. Manual ingest
  - name: ingest-manual
    entrypoint: found_footy.flows.ingest_flow:ingest_flow
    work_pool:
      name: ingest-pool
    parameters:
      date_str: null
      team_ids: "{{ all_teams_2025_ids }}"
    tags:
      - ingest
      - manual
    description: "Manual fixtures ingest - defaults to today's date"

  # 3. Advance Flow
  - name: advance-flow
    entrypoint: found_footy.flows.advance_flow:advance_flow
    work_pool:
      name: advance-pool
    parameters:
      source_collection: "fixtures_staging"
      destination_collection: "fixtures_active"
      fixture_id: 0
    tags:
      - advance
      - collections
    description: "Universal fixture advancement between collections"

  # 4. Goal processing flow
  - name: goal-flow
    entrypoint: found_footy.flows.goal_flow:goal_flow
    work_pool:
      name: goal-pool
    parameters:
      fixture_id: 0
      goal_events: []
    tags:
      - goals
      - processing
    description: "Dedicated goal event processing with Twitter triggering"

  # 5. Monitor flow
  - name: monitor-flow
    entrypoint: found_footy.flows.monitor_flow:monitor_flow
    work_pool:
      name: monitor-pool
    schedule:
      cron: "*/3 * * * *"
      timezone: UTC
      active: true
    parameters: {}
    tags:
      - monitor
      - live
    description: "Live fixture monitoring - dedicated pool"

  # 6. Twitter flow
  - name: twitter-flow
    entrypoint: found_footy.flows.twitter_flow:twitter_flow
    work_pool:
      name: twitter-pool
    parameters:
      goal_id: null
    tags:
      - twitter
      - social
    description: "Twitter goal processing with rich naming"