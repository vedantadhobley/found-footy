name: found-footy
prefect-version: 3.0.0

# Build step - no custom build needed since we use pip install -e .
build: null

# Push step - no remote storage for local development  
push: null

# Pull step - code is already installed via pip install -e .
pull: null

# ‚úÖ FIXED: Use empty string instead of null for team_ids
deployments:
  # 1. Daily auto-runner (disabled by default, configurable in UI)
  - name: fixtures-flow-daily
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    schedule:
      cron: "5 0 * * *"  # Daily at 00:05 UTC
      timezone: UTC
      active: false  # ‚úÖ DISABLED by default - enable in Prefect UI
    parameters:
      team_ids: ""  # ‚úÖ FIXED: Empty string instead of null
    tags:
      - fixtures
      - scheduled
      - daily
      - teams
      - top25-uefa
    description: |
      Daily fixtures monitor for top 25 UEFA teams (DISABLED by default)
      
      ‚öôÔ∏è  Configure in Prefect UI:
      - Enable/disable schedule
      - Change team_ids parameter for specific teams
      
      ‚öΩ Current approach: Top 25 UEFA ranked teams (2026)
      Examples: "[541,50,42]" (Real Madrid, Man City, Liverpool)

  # 2. Instant manual runner
  - name: fixtures-flow-manual
    entrypoint: found_footy.flows.fixtures_flow:fixtures_flow
    work_pool:
      name: fixtures-pool
    parameters:
      team_ids: ""  # ‚úÖ FIXED: Empty string instead of null
    tags:
      - fixtures
      - manual
      - instant
      - teams
      - top25-uefa
    description: |
      Manual fixtures runner - run immediately for any date/teams
      
      üìÖ Parameters:
      - date_str: "20250828" (YYYYMMDD format) or leave empty for today
      - team_ids: JSON array or comma-separated string of team IDs
      
      ‚öΩ Top 25 UEFA teams (2026):
      - 541: Real Madrid
      - 50: Manchester City  
      - 42: Liverpool
      - 529: Barcelona
      - empty string: All top 25 teams

  # 3. Twitter flow (unchanged)
  - name: twitter-flow
    entrypoint: found_footy.flows.twitter_flow:twitter_flow
    work_pool:
      name: twitter-pool
    parameters: {}
    tags:
      - twitter
      - automated
      - social-media
    description: "Twitter monitoring flow (triggered automatically by fixture completion events) - placeholder implementation"